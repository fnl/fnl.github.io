<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
        <title>fnl.es &middot; articles in the "Misc" category</title>
        <link rel="shortcut icon" href="http://fnl.es/favicon.ico" />
        <link href="http://fnl.es/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="fnl.es Atom Feed" />
                        <link href="http://fnl.es/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="fnl.es RSS Feed" />
        
        <link rel="stylesheet" href="http://fnl.es/theme/css/screen.css" type="text/css" />
        <link rel="stylesheet" href="http://fnl.es/theme/css/pygments.css" type="text/css" />
        <!-- Start of StatCounter Code for Default Guide -->
        <script type="text/javascript">
          var sc_project=3728421; 
          var sc_invisible=1; 
          var sc_security="a5624e69"; 
        </script>
        <script type="text/javascript"
                src="http://www.statcounter.com/counter/counter.js"></script>
        <!-- End of StatCounter Code for Default Guide -->
    </head>
    <body>
        <noscript><div class="statcounter">
          <a title="click tracking"
             href="http://statcounter.com/" target="_blank"><img
             class="statcounter"
             src="http://c.statcounter.com/3728421/0/a5624e69/0/"
             alt="click tracking"></a>
        </div></noscript>
        <div id="header">
            <ul id="nav">
                <li class="ephemeral selected"><a href="http://fnl.es/category/misc.html">Misc</a></li>
                <li><a class="flagred" href="http://fnl.es">Home</a></li>
                <li><a class="flagyellow" href="http://fnl.es/pages/about.html">About</a></li>
                  <li><a class="flagyellow" href="http://fnl.es/pages/projects.html">Projects</a></li>
                  <li><a class="flagred" href="http://fnl.es/archives.html">Archives</a></li>
            </ul>
            <div class="header_box">
                <h1><a href="http://fnl.es">fnl.es</a></h1>
                <h2><a href="mailto:flo@fnl.es" id="webmaster">fnl</a> en España</h2>
            </div>
        </div>
        <div id="wrapper">
            <div id="content">
                <h4 class="date">Mar 12,  2010</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fnl.es/rails-rspecing-controllers-with-declarative-authorization-and-authlogic.html" rel="bookmark" title="Permanent Link to &quot;Rails: RSpec'ing controllers with declarative authorization AND AuthLogic&quot;">Rails: RSpec'ing controllers with declarative authorization AND AuthLogic</a>
                    </h2>
                    
                    <p>I just had a rough time figuring out how to bypass all the security
features of the Rails project I am developing to write decent controller
specs with RSpec. I am using AuthLogic as authentication module and
declarative authorization (DA) for exactly that. However, when I started
to write controller specs that would simulate (HTTP) GET requests, I ran
into a wall: I simply could not digg what the cleanest way would be to
bypass both AuthLogic and DA. Finally, after finding the right queries
in Google, I managed to get the necessary snippets. To avoid that the
same tedious task might befall you, here's what you need to add, e.g.,
to your spec_helpers directory - I called the file
&quot;controller_helpers.rb&quot;:</p>
<pre class="literal-block">
module SessionHelper
  def current_user(stubs = {})
    &#64;current_user ||= mock_model(User, stubs)
  end

  def user_session(stubs = {}, user_stubs = {})
    &#64;current_user_session ||= mock_model(
      UserSession, { :user =&gt; current_user(user_stubs) }.merge(stubs)
    )
  end

  def login(session_stubs = {}, user_stubs = {})
    UserSession.stub!(:find).and_return(
      user_session(session_stubs, user_stubs)
    )
  end

  def logout()
    &#64;user_session = nil
  end

  def disable_authorization()
    Authorization.ignore_access_control(true)
  end
end
</pre>
<p>The trick is that, for AuthLogic, you can now &quot;authenticate&quot; the user
by the stubbed UserSession that returns a mocked User model. DA is less
complicated: the <tt class="docutils literal">disable_authorization()</tt> method is all that is
needed. Now, in your &quot;spec_helper.rb&quot;, you add this line to the top:</p>
<pre class="literal-block">
require File.dirname(__FILE__) + '/spec_helpers/controller_helpers'
</pre>
<p>And this line somewhere in the <tt class="docutils literal"><span class="pre">Spec::Runner.configure</span></tt> loop:</p>
<pre class="literal-block">
config.include(SessionHelper)
</pre>
<p>Now, in your controller specs, it is more than trivial to disable
authorization and authentication at once - simply add the following
line, e.g., to your <tt class="docutils literal"><span class="pre">before(:each)</span></tt> definitions:</p>
<pre class="literal-block">
disable_authorization &amp;&amp; login
</pre>
<p>Voila - your GET requests pass; and you can even add stubs to your
User model, if needed, by adding them as key-value pairs to the
<tt class="docutils literal">login()</tt> call above! So now you can get back to make your specs
pass...</p>


                    <div class="clear"></div>
                    <div class="info">
                        <a href="http://fnl.es/rails-rspecing-controllers-with-declarative-authorization-and-authlogic.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fnl.es/category/misc.html" rel="tag">Misc</a>                        
                        <div class="tags">
                            <a href="http://fnl.es/tag/rspec.html">rspec</a>
                            <a href="http://fnl.es/tag/rails.html">rails</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">May 26,  2009</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fnl.es/mobileme-vs-sugarsync-vs-dropbox.html" rel="bookmark" title="Permanent Link to &quot;MobileMe vs. SugarSync vs. DropBox&quot;">MobileMe vs. SugarSync vs. DropBox</a>
                    </h2>
                    
                    <p>I now have tested MobileMe, SugarSync, and DropBox for quite a while to
decide which service to buy for syncing my “electronic life” between my
Macs (soon I’ll be managing two OSX Server blades, one Mini, and two
MBPs!). After this period, there is no doubt to me: I’m syncing my iCal
calendars and Address Book content via Google, my bookmarks with XMarks,
and everything else via DropBox.</p>
<p>MobileMe’s iDisk is nothing more than a pain and a piece of junk, which
I honestly did not expect. After all the problems they had last year
launching Me.com, I thought they would have by now created a working
service. But the iDisk and syncing my PIM (Personal Information Manager
- I still use Yojimbo, as Evernote’s and Together’s handling of
encryption are pure patched add-ons) was just a [bad] joke: You even
need to buy extra software if you want to do file syncing, as iDisk’s
“offline” sync is so slow and error prone I could not believe Apple
dares to offer something like that. So you need to either use Lingon and
rsync to sync to your online mode iDisk which doesn’t win a medal for
simplicity, or buy something like ChronoSync - and that takes hours
(!!!) to ensure 10 GB of data in about 30-40k Files are synced, <strong>every
time</strong>. All the more, ChronoSync may be the fastest and safest syncer in
the wild! What finally got me mad was the sync agent using 90% CPU all
of the time, at times virtually locking you out of your own machine,
while performing almost nothing. Finally, if you ever try to navigate
that online iDisk, get yourself a cup of tea, you will have plenty of
time to drink it up until that file is open…</p>
<p>Compared to SugarSync, DropBox with its simplicity and real versioning
of files is significantly better performing than SugarSync, espcially if
we talk upload and real volume, and if you ever tried SugarSync, it is a
resource hugger (not as bad as iDisk, but it will stop your workflow).
So in the end the choice for me was based on “mutual exclusion”, there
is simply still no service that can hold the candle to DropBox - and
just got me Pro account. As I am writing this, I am syncing up dozens of
gigs of data to my 50 GB DropBox, and I hardly notice it happening!</p>
<p>Oh, if you get yourself an account for DropBox, either the free 2 GB or
a full Pro account, I would appreciate if you register via <a class="reference external" href="https://www.getdropbox.com/referrals/NTE0NTA0OTk">this link</a>,
as it creates me some 500 MB extra space for referring you :o).</p>


                    <div class="clear"></div>
                    <div class="info">
                        <a href="http://fnl.es/mobileme-vs-sugarsync-vs-dropbox.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fnl.es/category/misc.html" rel="tag">Misc</a>                        
                        <div class="tags">
                            <a href="http://fnl.es/tag/apple.html">Apple</a>
                            <a href="http://fnl.es/tag/cloud.html">Cloud</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <h4 class="date">May  1,  2009</h4>
                <div class="post">
                    <h2 class="title">
                        <a href="http://fnl.es/my-first-visit-to-a-volcano.html" rel="bookmark" title="Permanent Link to &quot;My first visit to a volcano&quot;">My first visit to a volcano</a>
                    </h2>
                    
                    <p>Actually, I already considered myself very lucky this year for visiting
the jungle in the Amazons. I would have not thought I could repeat such
an experience that soon again, but was proven wrong shortly after. A few
weeks ago, my girlfriend spent some weeks in Spain and we used the last
long weekend we had together to go to Tenerife, Canary islands. There I
had the pleasure to visit yet another really strange and amazing place
in our world: a volcano! My girlfriend, who grew up in Mexico, thought
it was quite funny I had not seen a volcano before... Well, she has not
been on a glacier so far :-P. I can only recommend this place - if you
do not know where to go for a short trip for a few days, you just have
found it. We rented a very romantic small house on the north-eastern tip
of the island, far away from all the tourist places. The owner renting
it to us (Juan Ramón) is a very kind and friendly guy, and he even went
into the trouble to send me my keys and a whole load of money I forgot
in the house - without even taking a cent for the troubles, although I
kept insisting! (Anybody knowing me don't laugh! Okay, I know, typically
Flo...) The house itself is built into the cliffs, with a marvelous view
over the sea and the beach below, and a great terrace. Mayte, my
girlfriend, found it and I can only say this was a great choice. If you
feel like renting it, follow this <a class="reference external" href="http://www.casas-turismo-rural.com/alojamiento.phtml?alojamiento=2740">link</a>.</p>
<p>We spent five days there, which is just enough time to visit the island
in a hurry - time flew by like nothing. You have to ask permission to
access the volcano in the capital city, Santa Cruz, which will then be
granted to you for a following day at a certain hour. Naturally, we
managed to be there too late the next day, but arrived again the day
after and the friendly guys guarding the entrance let us up anyways. Oh,
and pleeease dress appropriately: you can't imagine the scores of stupid
(Russian) girls trying to walk a volcano in high heels and with almost
nothing on - freezing to death at 3.700 m ASL and not able to walk in the
rocky area... Well, at least this allowed us to be completely alone at the
top of the crater! Another great feat of the park is, as it's at 2000+ m
ASL, that even if it's cloudy down on the beach, it might be a gorgeous
day in the park!</p>
<p>Finally, one last word of warning: do not take residence on the south
side of the island except if you like artificial touristic sprawls: the
whole area is one urban block of concrete and completely hideous. As far
as I can tell, the north-east tip is best, maybe the (north-)western
areas may have some nice hideaways from the touristic towns, too. As for
the climate: just expect 20-25 ˚C in winter, 20-30 ˚C in summer - great!
One final recommendation if you like driving on narrow, curvy mountain
roads: rent a powerful car - I haven't had so much fun riding a car in a
long time!</p>


                    <div class="clear"></div>
                    <div class="info">
                        <a href="http://fnl.es/my-first-visit-to-a-volcano.html">posted at 12:00 P</a>&nbsp;&middot;&nbsp;<a href="http://fnl.es/category/misc.html" rel="tag">Misc</a>                        
                        <div class="tags">
                            <a href="http://fnl.es/tag/mayte.html">Mayte</a>
                            <a href="http://fnl.es/tag/spain.html">Spain</a>
                            <a href="http://fnl.es/tag/nature.html">nature</a>
                        </div>                        
                    </div>
                    <div class="clear"></div>
                </div>

                <div class="clear"></div>
                <div class="pages">                
                    <a href="http://fnl.es/category/misc.html" class="prev_page">&larr;&nbsp;Previous</a>
                    <a href="http://fnl.es/category/misc3.html" class="next_page">Next&nbsp;&rarr;</a>
                    <span>Page 2 of 7</span>
                </div>

                <div class="clear"></div>
                <div id="footer">
                    <p>
                    Theme by <a href="http://nevanscott.com/">Nevan Scott</a>
                    &middot;
                    Modified by Florian Leitner
                    &middot;
                    <a class="atom" href="http://fnl.es/feeds/all.atom.xml">Feed</a>
                </div>
            </div>
            <div class="clear"></div>
        </div>
    </body>
</html>